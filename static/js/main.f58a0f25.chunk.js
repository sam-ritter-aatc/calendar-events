(this["webpackJsonpcalendar-events"]=this["webpackJsonpcalendar-events"]||[]).push([[0],{112:function(e,t,n){},113:function(e,t,n){},124:function(e,t){},126:function(e,t){},167:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(70),o=n.n(s),i=(n(88),n(79)),c=n(4),u=(n(89),n(11)),l=n(2),p=n.n(l),h=n(6),v=n(81),d=n(14),f=n(15),m=n(24),E=n(17),g=n(16),b=n(34),w=function(e){return"https://cors-anywhere.herokuapp.com/https://api.wildapricot.org/v2/accounts/"+e.Permissions[0].AccountId},k=function(e){return e.token_type+" "+e.access_token},y=n(36),O=function(){var e=Object(h.a)(p.a.mark((function e(t,n,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get(w(t)+"/events/"+n,{headers:{"Content-Type":"application/json",Authorization:k(t)}}).then((function(e){a(e.data)})).catch((function(e){console.log("Error",e),a({})}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(p.a.mark((function e(t,n,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get(w(t)+"/events",{headers:{"Content-Type":"application/json",Authorization:k(t)},params:{$filter:"StartDate ge "+n}}).then((function(e){a(e.data.Events)})).catch((function(e){console.log("Error",e),a([])}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),D=n(71),x=n.n(D),C=n(44),S=n.n(C),T=n(72),N=n(25),I=n(73),z=n(74),M=n(75),A=n(76),L=(n(112),function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).calendarComponentRef=r.a.createRef(),a.state={isCreateEvent:!1,isEditing:!1,currentEvent:{id:"",title:"",description:"",location:"",organizer:"",start:new Date,end:new Date},events:[],showCreateModal:!1,calendarWeekends:!0,waToken:{}},a.modalToggle=function(){a.setState({showCreateModal:!a.state.showCreateModal})},a.editToggle=function(){a.setState({isEditing:!a.state.isEditing})},a.userCanEdit=function(){return!0},a.eventRsvp=function(e){console.log("event rsvp",a.state.currentEvent),alert("you have been registered for event: "+a.state.currentEvent.title)},a.saveEvent=function(e){if(a.modalToggle(),console.log("saving event",a.state.currentEvent),a.state.isCreateEvent)a.setState({events:a.state.events.concat(Object.assign({},a.state.currentEvent))});else{var t=a.state.events.findIndex((function(e){return e.id===a.state.currentEvent.id})),n=Object(v.a)(a.state.events);n[t]=a.state.currentEvent,a.setState({events:n})}a.clearCurrentEvent()},a.clearCurrentEvent=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({currentEvent:{}});case 2:console.log("state",a.state);case 3:case"end":return e.stop()}}),e)}))),a.handleEventClick=function(e){console.log("going to event",e),a.props.history.push({pathname:"/showEvent",state:{id:e.event.id,name:e.event.title,url:e.event.extendedProps.Url,parentId:e.event.extendedProps.parentId}})},a.handleDateClick=function(e){a.setState({isCreateEvent:!0,isEditing:!0,currentEvent:e});var t=new Date(e.date.getTime()),n=new Date(e.date.getTime());n.setDate(n.getDate()+1),a.setState({currentEvent:{id:S()(),start:t,end:n}}),a.showModal(e)},a.createEvent=function(){a.setState({isCreateEvent:!0,isEditing:!0});var e=new Date,t=new Date;t.setDate(t.getDate()+1),a.setState({currentEvent:{id:S()(),start:e,end:t}}),a.showModal()},a.showModal=function(e){console.log("showModal - incoming e",e),a.modalToggle()},a.onChangeEventName=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({currentEvent:Object(u.a)(Object(u.a)({},a.state.currentEvent),{},{title:t})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeEventDescription=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({currentEvent:Object(u.a)(Object(u.a)({},a.state.currentEvent),{},{description:t})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeLocation=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({currentEvent:Object(u.a)(Object(u.a)({},a.state.currentEvent),{},{location:t})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleStartChange=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({currentEvent:Object(u.a)(Object(u.a)({},a.state.currentEvent),{},{start:t})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleEndChange=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({currentEvent:Object(u.a)(Object(u.a)({},a.state.currentEvent),{},{end:t})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeEventName=a.onChangeEventName.bind(Object(m.a)(a)),a.onChangeEventDescription=a.onChangeEventDescription.bind(Object(m.a)(a)),a.onChangeLocation=a.onChangeLocation.bind(Object(m.a)(a)),console.log("result","https://cors-anywhere.herokuapp.com/https://oauth.wildapricot.org/auth/token"),a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)((function(e){return t.setState({waToken:e})}));case 2:return e.next=4,j(this.state.waToken,"2019-01-01",(function(e){var n=x()(e).map((function(e){return{id:e.Id,title:e.Name,start:e.StartDate,end:e.EndDate,Url:e.Url,Tags:e.Tags,backgroundColor:t.getEventColor(e),parentId:e.parentId}}));t.setState({events:n})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEventColor",value:function(e){return/Ironman/.test(e.Name)?"red":e.isRecurringSession?"green":"blue"}},{key:"render",value:function(){return r.a.createElement("div",{className:"EventCalendar"},r.a.createElement(T.a,{defaultView:"dayGridMonth",firstDay:1,fixedWeekCount:!1,header:{left:"prev today next",center:"title",right:"dayGridMonth,timeGridWeek,listMonth"},plugins:[N.d,I.a,A.a,z.a,M.a],themeSystem:"bootstrap",displayEventTime:!0,selectable:!0,ref:this.calendarComponentRef,weekends:this.state.calendarWeekends,events:this.state.events,dateClick:this.handleDateClick,eventClick:this.handleEventClick}),r.a.createElement("button",{onClick:this.createEvent},"Create Event"))}}]),n}(a.Component)),R=n(82),W=(n(113),function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{"data-testid":"switchable-text-input",className:this.props.className},r.a.createElement("label",null,this.props.label),this.props.inputFlag?r.a.createElement("input",{type:"text",className:"form-control",value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)}}):this.props.value)}}]),n}(a.Component)),_=n(77),B=n.n(_),G=n(78),P=n.n(G),U=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("h1",null,this.props.name),r.a.createElement("h2",null,"Loading"),r.a.createElement(P.a,{type:"ThreeDots",color:"#2BAD60",height:"100",width:"100"}))}}]),n}(a.Component),q=n(36),F=function(){var e=Object(h.a)(p.a.mark((function e(t,n,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.get(w(t)+"/contacts/"+n,{headers:{"Content-Type":"application/json",Authorization:k(t)}}).then((function(e){var t={};t.firstName=e.data.FirstName,t.lastName=e.data.LastName,t.email=e.data.Email,t.display=e.data.DisplayName,a(t)})).catch((function(e){return{}}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),H=n(164)(),J=function(e){Object(E.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={eventId:"",waToken:{},url:"",event:null,organizer:null},console.log("display",e),a}return Object(f.a)(n,[{key:"eventDetails",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.location.state.parentId){e.next=5;break}return e.next=3,O(this.state.waToken,this.props.location.state.parentId,(function(e){for(var n=H(e),a=0,r=Object.entries(n.Sessions);a<r.length;a++){var s=Object(R.a)(r[a],2),o=s[0],i=s[1];if(o=o,i.Id===t.props.location.state.id){n.EndDate=i.EndDate,n.StartDate=i.StartDate,n.Name=i.Title,n.sessionId=i.Id;break}}t.setState({event:n}),console.log("state",t.state)}));case 3:e.next=7;break;case 5:return e.next=7,O(this.state.waToken,this.props.location.state.id,(function(e){t.setState({event:e})}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){console.log("unmounting########")}},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)((function(e){return t.setState({waToken:e})}));case 2:return e.next=4,this.eventDetails();case 4:if(!(this.state.event&&this.state.event.Details&&this.state.event.Details.Organizer)){e.next=8;break}return e.next=7,F(this.state.waToken,this.state.event.Details.Organizer.Id,(function(e){t.setState({organizer:e}),console.log("=====ORG",e,t.state.organizer)}));case 7:console.log("contact",this.state.organizer);case 8:console.log("state",this.state);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log("eventDisplay",this.props.location.state),null===this.state.event?r.a.createElement(U,{name:this.props.location.state.name}):r.a.createElement("div",null,r.a.createElement("h2",null,this.state.event.Name),r.a.createElement(W,{className:"event_id",label:"Event Id: ",value:this.state.event.Id}),r.a.createElement(W,{className:"event-title",label:"Event Name: ",value:this.state.event.Name}),r.a.createElement(W,{className:"event-start",label:"Event Start Date/Time: ",value:this.state.event.StartDate}),r.a.createElement(W,{className:"event-end",label:"Event End Date/Time: ",value:this.state.event.EndDate}),r.a.createElement(W,{className:"location",label:"Event Location: ",value:this.state.event.Location}),this.state.organizer&&r.a.createElement(W,{className:"organizer",label:"Organizer: ",value:this.state.organizer.display+"("+this.state.organizer.email+")"}),this.state.event.Details&&this.state.event.Details.DescriptionHtml?r.a.createElement("div",null,r.a.createElement("h3",null,"Description"),r.a.createElement("div",null,B()(this.state.event.Details.DescriptionHtml))):r.a.createElement("div",null))}}]),n}(a.Component);var $=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{basename:"/"},r.a.createElement(c.a,{exact:!0,path:"/",component:L}),r.a.createElement(c.a,{exact:!0,path:"/showEvent",component:J})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},34:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var a=n(2),r=n.n(a),s=n(6),o=n(36),i=n(109),c=function(){var t=Object(s.a)(r.a.mark((function t(n){var a,s,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("url","https://cors-anywhere.herokuapp.com/https://oauth.wildapricot.org/auth/token"),console.log("key","mf8q984b3zem9x5r6rk19yg37ht6uz"),a="Basic "+new e("APIKEY:mf8q984b3zem9x5r6rk19yg37ht6uz").toString("base64"),s={grant_type:"client_credentials",scope:"auto",obtain_refresh_token:!0},c={headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:a}},t.next=7,o.post("https://cors-anywhere.herokuapp.com/https://oauth.wildapricot.org/auth/token",i.stringify(s),c).then((function(e){n(e.data)})).catch((function(e){console.log("error",e)}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}).call(this,n(29).Buffer)},71:function(e,t){var n=function(e){var t=Object.assign({},e);if(e.Sessions){var n=[];return e.Sessions.forEach((function(e){var a=Object.assign({},t);a.Id=e.Id,a.parentId=t.Id,a.Title=e.Title,a.StartDate=e.StartDate,a.EndDate=e.EndDate,a.StartTimeSpecified=e.StartTimeSpecified,a.EndTimeSpecified=e.EndTimeSpecified,a.isRecurringSession=!0,a.isOrganizedEvent=e.Details&&e.Details.Organizer,delete a.Sessions,n.push(a)})),n}return t};e.exports=function(e){var t=[];return Array.isArray(e)?e.forEach((function(e){var a=n(e);Array.isArray(a)?a.forEach((function(e){t.push(e)})):t.push(a)})):t.push(n(e)),t}},83:function(e,t,n){e.exports=n(167)},88:function(e,t,n){},89:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.f58a0f25.chunk.js.map